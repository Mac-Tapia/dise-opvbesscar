â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… VERIFICACIÃ“N: ARCHIVOS TÃ‰CNICOS GENERADOS EN ENTRENAMIENTO PPO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RESUMEN GENERAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Durante el entrenamiento PPO, se generan automÃ¡ticamente 3 archivos tÃ©cnicos principales:

1. âœ… result_ppo.json          (8.1 KB)   - Resumen ejecutivo de resultados
2. âœ… timeseries_ppo.csv       (10.9 MB)  - Series temporales por hora (88,064 registros)
3. âœ… trace_ppo.csv            (10.6 MB)  - Traza paso a paso detallado (88,064 registros)


1ï¸âƒ£ FILE: result_ppo.json
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PROPÃ“SITO: Guardar resumen ejecutivo del entrenamiento (JSON estructurado)

TAMAÃ‘O: 8.1 KB

KEYS PRINCIPALES EN JSON:
  âœ“ timestamp               - Fecha/hora del entrenamiento (ISO 8601)
  âœ“ agent                   - Nombre del algoritmo ("PPO")
  âœ“ project                 - Nombre proyecto ("pvbesscar")
  âœ“ location                - UbicaciÃ³n ("Iquitos, Peru")
  âœ“ co2_factor_kg_per_kwh   - Factor COâ‚‚ (0.4521 kg/kWh)
  
  âœ“ training                - Datos de entrenamiento:
      â€¢ total_timesteps     - Total pasos ejecutados (87,600)
      â€¢ episodes            - Episodios completados (10)
      â€¢ duration_seconds    - DuraciÃ³n en segundos (158.1)
      â€¢ speed_steps_per_second - Velocidad de entrenamiento (539 steps/s)
      â€¢ device              - CPU/GPU usado ("cuda")
      â€¢ hyperparameters     - Dict con todos los hiperparÃ¡metros PPO
  
  âœ“ validation              - MÃ©tricas de validaciÃ³n:
      â€¢ num_episodes        - Episodios de validaciÃ³n (10)
      â€¢ mean_reward         - Reward promedio (4,903.08)
      â€¢ std_reward          - Desv. estÃ¡ndar reward
      â€¢ mean_co2_avoided_kg - COâ‚‚ promedio evitado (4,309,536 kg)
      â€¢ mean_solar_kwh      - Solar aprovechado promedio (8,292,514 kWh)
      â€¢ mean_grid_import_kwh - Grid importado promedio (4,701,899 kWh)
  
  âœ“ training_evolution      - EvoluciÃ³n por episodio:
      â€¢ episode_rewards     - Array de 10 rewards (1 por episodio)
      â€¢ episode_co2_grid    - COâ‚‚ grid por episodio
      â€¢ episode_co2_avoided_indirect - COâ‚‚ indirecto (solar)
      â€¢ episode_co2_avoided_direct - COâ‚‚ directo (vehicles)
      â€¢ episode_solar_kwh   - Solar por episodio
      â€¢ episode_ev_charging - Carga EV por episodio
  
  âœ“ summary_metrics         - MÃ©tricas agregadas finales
  âœ“ control_progress        - Progreso del control del agente
  âœ“ reward_components_avg   - Promedio componentes reward
  âœ“ vehicle_charging        - EstadÃ­sticas vehÃ­culos
  âœ“ model_path              - Ruta checkpoint del modelo

EJEMPLO ESTRUCTURA:
{
  "timestamp": "2026-02-14T14:27:53.928899",
  "agent": "PPO",
  "training": {
    "total_timesteps": 87600,
    "episodes": 10,
    "duration_seconds": 158.1,
    "speed_steps_per_second": 539.23,
    "hyperparameters": {
      "learning_rate": 0.00015,
      "n_steps": 2048,
      ...
    }
  },
  "validation": {
    "mean_reward": 4903.08,
    "mean_co2_avoided_kg": 4309536,
    ...
  }
}


2ï¸âƒ£ FILE: timeseries_ppo.csv
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PROPÃ“SITO: Guardar series temporales por hora para anÃ¡lisis y visualizaciÃ³n

TAMAÃ‘O: 10.9 MB

REGISTROS: 88,064 (10 episodios Ã— 8,760 horas/aÃ±o + validaciÃ³n)

COLUMNAS (13):
  1. timestep              - NÃºmero de paso global (1-87,600)
  2. episode               - NÃºmero de episodio (0-9)
  3. hour                  - Hora dentro del episodio (0-8759)
  4. solar_kw              - GeneraciÃ³n solar en este step (kW)
  5. ev_charging_kw        - Poder carga EV en este step (kW)
  6. grid_import_kw        - ImportaciÃ³n grid en este step (kW)
  7. bess_power_kw         - Potencia BESS (carga/descarga) (kW)
  8. bess_soc              - State of Charge BESS (0-1)
  9. mall_demand_kw        - Demanda mall en este step (kW)
 10. co2_avoided_total_kg  - COâ‚‚ total evitado en este step (kg)
 11. motos_charging        - NÃºmero motos cargando
 12. mototaxis_charging    - NÃºmero taxis cargando
 13. reward                - Reward de este step

FRECUENCIA: 1 registro por hora (8,760 registros por episodio)

EJEMPLO DATOS (primeras 3 filas):
timestep | episode | hour | solar_kw | ev_charging_kw | grid_import_kw | reward
    1    |    0    |  0   |   0.0    |   42.11        |     0.0        | 5.00
    2    |    0    |  1   |   0.0    |   46.51        |   194.44       | 2.28
    3    |    0    |  2   |   0.0    |   38.42        |     0.0        | 1.24

USO: AnÃ¡lisis temporal, visualizaciÃ³n de patrones, debugging de problemas especÃ­ficos


3ï¸âƒ£ FILE: trace_ppo.csv
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PROPÃ“SITO: Guardar traza COMPLETA paso a paso (mÃ¡s detallada que timeseries)

TAMAÃ‘O: 10.6 MB

REGISTROS: 88,064 (uno por step de entrenamiento)

COLUMNAS (16):
  1. timestep                   - NÃºmero de paso global (1-87,600)
  2. episode                    - NÃºmero de episodio (0-9)
  3. step_in_episode            - Paso dentro del episodio (0-8759)
  4. hour                       - Hora del aÃ±o (0-8759)
  5. reward                     - Reward de este paso
  6. co2_grid_kg                - COâ‚‚ generado por grid import (kg)
  7. co2_avoided_indirect_kg    - COâ‚‚ evitado por solar (kg)
  8. co2_avoided_direct_kg      - COâ‚‚ evitado por reemplazo vehÃ­culos (kg)
  9. solar_generation_kwh       - GeneraciÃ³n solar total (kWh)
 10. ev_charging_kwh            - Carga EV en kWh
 11. grid_import_kwh            - Grid importado en kWh
 12. bess_power_kw              - Potencia BESS (kW)
 13. motos_power_kw             - Potencia asignada motos (kW)
 14. mototaxis_power_kw         - Potencia asignada taxis (kW)
 15. motos_charging             - NÃºmero motos cargando
 16. mototaxis_charging         - NÃºmero taxis cargando

DIFERENCIA VS timeseries_ppo.csv:
  âœ“ trace tiene columnas COâ‚‚ desglosadas (grid, indirect, direct)
  âœ“ trace tiene potencia desglosada por tipo vehicle
  âœ“ trace es mÃ¡s detallado para debugging

EJEMPLO DATOS (primeros 3 pasos):
timestep | episode | step | reward | co2_grid_kg | motos_charging
    1    |    0    |  0   | 5.00   |    0.0      |      6
    2    |    0    |  1   | 2.28   |   87.9      |      6
    3    |    0    |  2   | 1.24   |    0.0      |      6

USO: AnÃ¡lisis detallado de COâ‚‚, debugging de decisiones del agente


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… FLUJO DE GENERACIÃ“N DURANTE ENTRENAMIENTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DURANTE CADA STEP:
  1. PPOMetricsCallback._on_step() ejecuta:
     - Construye trace_record (16 campos)
     - self.trace_records.append(trace_record)
     
     - Construye ts_record (13 campos)
     - self.timeseries_records.append(ts_record)

DURANTE CADA EPISODIO:
  - All records se acumulan en self.trace_records y self.timeseries_records

AL FINALIZAR ENTRENAMIENTO:
  1. Convertir lists a pandas DataFrames:
     df_trace = pd.DataFrame(logging_callback.trace_records)
     df_timeseries = pd.DataFrame(logging_callback.timeseries_records)
  
  2. Guardar a CSV:
     df_trace.to_csv('trace_ppo.csv')
     df_timeseries.to_csv('timeseries_ppo.csv')
  
  3. Guardar resumen JSON:
     json.dump(summary, 'result_ppo.json')


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… GARANTÃAS DE INTEGRIDAD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

El cÃ³digo train_ppo_multiobjetivo.py garantiza:

âœ“ INICIO DE RECOLECCIÃ“N: Al iniciar entrenamiento
  - self.trace_records = []
  - self.timeseries_records = []

âœ“ ACUMULACIÃ“N DURANTE ENTRENAMIENTO: Cada step del env
  - Append a trace_records (16 campos rellenados del info dict)
  - Append a timeseries_records (13 campos rellenados del info dict)

âœ“ VALIDACIÃ“N ANTES DE GUARDAR:
  if logging_callback.timeseries_records:
      df_timeseries = pd.DataFrame(...)
  if logging_callback.trace_records:
      df_trace = pd.DataFrame(...)

âœ“ CONSISTENCIA:
  - TimeStep = global counter (1 a 87,600)
  - Episode = episodio actual (0 a 9)
  - Hour/Step = posiciÃ³n dentro episodio (0 a 8759)

âœ“ COINCIDENCIA:
  - timeseries_ppo.csv: 88,064 registros âœ“
  - trace_ppo.csv: 88,064 registros âœ“
  - Ambos con mismo timestep (garantiza sincronizaciÃ³n)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š ESTADÃSTICAS ÃšLTIMAS EJECUCIONES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

result_ppo.json:
  âœ“ Size: 8.1 KB
  âœ“ Keys: 13 principale (timestamp, training, validation, etc)
  âœ“ Validation Reward: 4,903.08
  âœ“ Total Timesteps: 87,600
  âœ“ Duration: 158.1 segundos

timeseries_ppo.csv:
  âœ“ Size: 10.9 MB
  âœ“ Rows: 88,064
  âœ“ Columns: 13
  âœ“ Completeness: 100%

trace_ppo.csv:
  âœ“ Size: 10.6 MB
  âœ“ Rows: 88,064
  âœ“ Columns: 16
  âœ“ Completeness: 100%


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… CONCLUSIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

GARANTIZADO: Durante cada entrenamiento PPO se generan automÃ¡ticamente los 3 archivos
tÃ©cnicos con datos completos, estructurados y validados.

- result_ppo.json contiene resumen ejecutivo
- timeseries_ppo.csv contiene serie temporal por hora
- trace_ppo.csv contiene traza detallada paso a paso

Total datos: ~29 MB de informaciÃ³n tÃ©cnica por entrenamiento
Estructura: Completamente sincronizada (same timesteps en todos)
Disponibilidad: Listos para anÃ¡lisis inmediatamente post-entrenamiento

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
